<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
        <title>404 - v6</title>
        <style>
            #redirect-container {
                display: none;
            }

            #four-oh-container {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container" id="page-content">
            <div class="row ">
                <!-- START content -->
                <div class="col-xl-8 order-first">
                    <nav aria-label="breadcrumbs">
                        <ul class="breadcrumbs">
                            <li><a href="index.html">Home</a></li>
                        </ul>
                    </nav>

                    <a id="main-content"></a>

                    <!-- START redirect container -->
                    <div id="redirect-container">
                        <h1 class="margin-top-zero">Archived Page - v6</h1>
                        <p>This content has been updated or relocated. You will be redirected shortly to the latest version. Please update your links if necessary.</p>  
                    </div>
                    <!-- END redirect container -->

                    <!-- START 404 container -->
                    <div id="four-oh-container">
                        <h1 class="margin-top-zero">Page not found - v6</h1>
			            <p>We're sorry, but the page you're looking for doesn't exist.</p>
                    </div>
                    <!-- END 404 container -->

                </div>
                <!-- END content --> 
            </div>
        </div>
        
        <script>

        // References to DOM objects
        var fourOhInfo = document.getElementById("four-oh-container");
        var redirectInfo = document.getElementById("redirect-container");

        // Array of objects with oldURL and newURL properties
        const urlMappings = [
            { oldPath: '/essays/eaxample-1/', newPath: '/documentation/shortcodes/transcript-shortcode/' },
            { oldPath: '/assignments/getting-started/research/', newPath: '/documentation/shortcodes/accordion-shortcode/' },
            { oldPath: '/frog', newPath: '/documentation/shortcodes/image-shortcode/' },
            { oldPath: '/fish', newPath: '/documentation/shortcodes/nav-panel-shortcode/' }
        ];

        // Prefix for the environment; set to '' for live and '/ll-static-test' for test
        const pathPrefix = '/ll-static-test';

        // Function to extract the path after the domain, considering the prefix for the environment
        function extractPathAfterDomain(url) {
            const urlObj = new URL(url);
            let path = urlObj.pathname;

            // Remove the path prefix if present
            if (path.startsWith(pathPrefix)) {
                path = path.substring(pathPrefix.length);
            }

            return path;
        }

        // Function to normalize a path by trimming leading and trailing slashes
        function normalizePath(path) {
            return path.replace(/^\/|\/$/g, '');
        }

        // Function to replace the old URL path with the new URL path, adding the prefix
        function replaceUrlPath(url, newPath) {
            const urlObj = new URL(url);
            urlObj.pathname = pathPrefix + newPath;
            return urlObj.toString();
        }

        // Use window.location to get the current URL
        const currentURL = window.location.href;

        // Extract and normalize the path after the domain
        const extractedPath = normalizePath(extractPathAfterDomain(currentURL));

        // Log the extracted path for debugging
        console.log("Extracted Path: " + extractedPath);

        // Compare the normalized extracted path with the normalized oldPath in the list
        const mapping = urlMappings.find(function(mapping) {
            const normalizedOldPath = normalizePath(mapping.oldPath);
            // Log each comparison for debugging
            console.log("Comparing: " + normalizedOldPath + " with " + extractedPath);
            return normalizedOldPath === extractedPath;
        });

        if (mapping) {
            // Construct the new URL using the newPath from the mapping
            // Show the redirect info
            const newUrl = replaceUrlPath(currentURL, mapping.newPath);
            console.log("Match found! New URL: " + newUrl);
            redirectInfo.style.display = "block";
            doRedirect(newUrl);
        } else {
            // No match, show the 404 info
            console.log("No match found.");
            fourOhInfo.style.display = "block";
        }

        function doRedirect(redirectUrl) {
            // Redirect after 5 seconds
            setTimeout(function() {
                console.log('Redirecting to: ' + redirectUrl);
                window.location.href = redirectUrl;
            }, 5000);
        }

        </script>
        <!-- <script type="text/javascript" src="../../../wp-content/themes/picostrap5-child-base/js/redirect%EF%B9%96v=1.0.2.js"></script> -->
    </body>
</html>
